<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>My Primairy Domain</title>

    <script src="/dist/h5-kv-storage.js"></script>
</head>
<body>
    <iframe id="xdomain-storage" src="//test.poki.nl/example/xdomain.html"></iframe>

    <script type="application/javascript">
        console.log('Hello from: ', window.location.host);

        var adapter = new kvstorage.XDomain('http://test.poki.nl', '#xdomain-storage');
        var storage = new kvstorage.KvStorage();

        storage.setAdapter(adapter);
        adapter.initialize()
            .then(() => storage.setItem('foo', 'bar'))
            .then((status) => console.log('Status for setting on target domain:', status))
            .then(() => storage.getItem('foo'))
            .then((value) => console.log('Fetching foo from target domain:', value))
            .then(() => adapter.length())
            .then((length) => console.log('Fetching length from target domain:', length))
    </script>
</body>
</html>
